<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Ontario Trails ‚Äî GPS Web Map</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="format-detection" content="telephone=no">


  <!-- Vendor CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder@2.4.0/dist/Control.Geocoder.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-search@4.0.0/dist/leaflet-search.min.css" />

  <!-- App CSS -->
  <link rel="stylesheet" href="./app.css" />
</head>
<body>
  <!-- Map -->
  <div id="map"></div>

  <!-- Crosshair in center -->
  <div id="crosshair" aria-hidden="true"></div>

  <!-- Toggle button -->
  <button id="controlToggle" class="control-toggle" aria-expanded="true" title="Open panel">‚ò∞ Controls</button>

  <!-- Controls panel -->
  <aside id="controlPanel" class="control-panel open" aria-hidden="false">
    <div class="panel-header">
      <h2>Map Controls</h2>
      <button id="closePanelBtn" class="icon-btn" title="Close">‚úï</button>
    </div>

    <section class="panel-section">
      <h3>Filters</h3>
      <div class="filters" id="filters">


        <label><input type="checkbox" id="showBase" checked> Base map</label>
        <label><input type="checkbox" id="showImagery"> Satellite Imagery (WMTS)</label>

                <!-- Imagery blend slider -->
<div id="imageryBlendRow" style="display:flex;align-items:center;gap:.5rem;margin:.25rem 0 0 1.5rem;">
  <label for="imageryOpacity" style="font-size:0.9rem;opacity:.85;min-width:3.5rem;">Blend</label>
  <input type="range" id="imageryOpacity" min="0" max="100" value="50" step="1" style="flex:1;">
  <span id="imageryOpacityVal" style="font-variant-numeric:tabular-nums;">100%</span>
</div>
        <label><input type="checkbox" id="showContours"> Elevation Contours</label>
        <label><input type="checkbox" id="showPins" checked> Pins</label>
        <label><input type="checkbox" id="showCrosshair" checked> Crosshair</label>
        <label><input type="checkbox" id="showStocked"> Stocked Lakes</label>
        <label><input type="checkbox" id="showAccess"> Access Points</label>
        <label><input type="checkbox" id="showTrails"> Trails (OTN)</label>
            
      </div>
    </section>

    <section class="panel-section">
      <h3>Pin Drops</h3>
      <div class="row">
        <select id="pinType">
          <option>Camping</option><option>Water</option><option>Viewpoint</option>
          <option>Hazard</option><option>Parking</option><option>Other</option>
        </select>
        <input id="pinLabel" type="text" placeholder="Label (e.g., Camp A)" />
      </div>
      <div class="row">
        <button class="btn" id="addPinBtn">‚ûï Add pin here</button>
        <button class="btn" id="exportPinsBtn">‚¨áÔ∏è Download pins (GPX)</button>
      </div>
      <div class="row">
        <label class="btn" for="importPinsInput">‚¨ÜÔ∏è Upload pins (JSON/GPX)</label>
        <input id="importPinsInput" type="file" accept=".json,.geojson,.gpx" />
        <span id="pinCount" class="muted"></span>
      </div>
    </section>

    <section class="panel-section">
      <h3>Track Recorder</h3>
      <div class="row">
        <button class="btn" id="trackStartBtn">‚óè Start</button>
        <button class="btn" id="trackStopBtn" disabled>‚ñ† Stop</button>
        <button class="btn" id="trackSaveBtn" disabled>üíæ Save GPX</button>
      </div>
    </section>

    <section class="panel-section">
      <h3>Map Actions</h3>
      <div class="row">
        <button class="btn" id="locateBtn">üìç Locate</button>
        <button class="btn" id="followBtn">‚ñ∂Ô∏è Follow: Off</button>
        <button class="btn" id="resetViewBtn">‚Ü∫ Reset view</button>
      </div>
    </section>

    <section class="panel-section">
      <h3>Legend</h3>

      <!-- Existing legend items -->
      <div class="legend-items">
        <div><span class="legend-line legend-base"></span>Base</div>
        <div><span class="legend-line legend-trail"></span>Trails (OTN)</div>
        <div><span class="legend-dot"></span>Your location</div>
      </div>

      <!-- New contour color legend (like example) -->
      <div class="contour-legend">
        <div class="contour-legend-title">Elevation (m)</div>
        <div class="contour-ramp" aria-hidden="true"></div>
        <div class="contour-ticks">
          <span id="elevMinTick">0</span>
          <span id="elevMidTick">350</span>
          <span id="elevMaxTick">700</span>
        </div>
        <div class="contour-note" id="contourHint">Zoom to <b>11+</b> to load contours</div>
        <div class="contour-note">Contour colors: Blue (low) ‚Üí Green ‚Üí Brown (high)</div> 
        <div class="contour-note">Version 1.0 </div>
    </section>
  </aside>

  <!-- Vendor JS -->
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script defer src="https://unpkg.com/leaflet-control-geocoder@2.4.0/dist/Control.Geocoder.js"></script>
  <script defer src="https://unpkg.com/leaflet-search@4.0.0/dist/leaflet-search.min.js"></script>
  <script defer src="https://unpkg.com/esri-leaflet@3.0.12/dist/esri-leaflet.js"></script>

  <!-- App JS -->
  <script defer src="./app.js"></script>
</body>
</html>
